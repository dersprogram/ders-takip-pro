<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Haftalık Program</title>
<style>
/* GENEL AYARLAR */
html,body{height:100%;margin:0;background:var(--bg0);color:var(--text);font-family:system-ui,-apple-system,sans-serif;overflow-x:hidden;}
:root{
      --bg0:#060a12;
      --bg1:#0b1220;
      --orange:#ff7a00;
      --text: rgba(255,255,255,.92);
      --line: rgba(255,255,255,.10);
}

/* ANA ÇERÇEVE VE ORTALAMA */
.appFrame{ 
    display: flex; 
    justify-content: center; /* Yatayda ortala */
    align-items: flex-start; 
    min-height: 100vh;
    width: 100%;
}

.appBorder{
    width: 100vw !important;
    min-height: 100svh !important;
    border: 3px solid var(--orange);
    padding: 10px;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

/* TABLO TAŞIYICI VE ORTALAMA MANTIĞI */
.weeklyTableWrapper {
    width: 100%;
    overflow-x: auto; /* Dikeyde kaydırma sağlansın */
    -webkit-overflow-scrolling: touch;
    text-align: center; /* İÇERİĞİ ORTALAR */
    display: block;
}

/* GRID YAPISI */
.wgrid {
    display: inline-grid; /* İçerik kadar yer kapla ve ortalanabilir ol */
    margin: 0 auto;       /* Sağa sola ortala */
    grid-template-columns: repeat(9, 1fr);
    border: 2px solid rgba(255,255,255,0.5);
    background: rgba(0,0,0,0.2);
    border-radius: 8px;
}

/* DİKEY MOD ÖZEL AYAR (900px korunarak ortalama) */
@media (orientation: portrait) {
    .wgrid {
        min-width: 900px; /* İstediğin genişlik */
    }
    .orientation-hint { display: block; text-align: center; color: var(--orange); padding: 10px; font-weight: bold; }
}

/* YATAY MOD */
@media (orientation: landscape) {
    .wgrid { min-width: 100%; }
    .orientation-hint { display: none; }
}

/* HÜCRE STİLLERİ */
.wcell {
    border-right: 1px solid var(--line);
    border-bottom: 1px solid var(--line);
    padding: 8px 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 45px;
}
.wtop { background: rgba(255,122,0,0.1); color: var(--orange); font-weight: bold; }
.wleft { background: rgba(255,255,255,0.05); font-weight: bold; }
.wles { font-size: 14px; font-weight: 800; }
.wcls { font-size: 11px; opacity: 0.7; }

/* KAPAT BUTONU */
.weeklyClose {
    position: absolute; top: 15px; right: 15px;
    width: 35px; height: 35px; background: var(--orange);
    border: none; border-radius: 8px; font-weight: 900; cursor: pointer;
}
</style>
</head>
<body class="weekly-open">

<div class="appFrame">
    <div class="appBorder">
        <button class="weeklyClose" onclick="window.history.back()">✕</button>
        
        <div class="orientation-hint">↔ En iyi görünüm için telefonu yan çevirin</div>

        <div class="weeklyTableWrapper">
            <div id="weeklyGrid" class="wgrid">
                </div>
        </div>
    </div>
</div>

<script>
// VERİLERİ LOCALSTORAGE'DAN ÇEKME
const ALL_DAYS = ["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"];
const LS_SCHEDULE_KEY = "dt_schedule_v1";
const LS_ACTIVE_DAYS_KEY = "dt_active_days_v1";

function renderWeeklyGrid() {
    const grid = document.getElementById("weeklyGrid");
    if(!grid) return;

    let schedule = JSON.parse(localStorage.getItem(LS_SCHEDULE_KEY)) || {};
    let activeDays = JSON.parse(localStorage.getItem(LS_ACTIVE_DAYS_KEY)) || ALL_DAYS;

    let html = '';

    // ÜST BAŞLIK SATIRI (Boş hücre + 8 Ders)
    html += '<div class="wcell wtop wleft"></div>';
    for(let i=1; i<=8; i++) {
        html += `<div class="wcell wtop">${i}. Ders</div>`;
    }

    // GÜN SATIRLARI
    activeDays.forEach(day => {
        html += `<div class="wcell wleft">${day.substring(0,3)}</div>`; // Dikeyde kısa isim
        for(let slot=1; slot<=8; slot++) {
            const lesson = (schedule[day] && schedule[day][slot]) ? schedule[day][slot] : null;
            const name = lesson ? lesson.les : "";
            const cls = lesson ? lesson.cls : "";
            
            html += `
                <div class="wcell">
                    <div class="wcls">${cls}</div>
                    <div class="wles">${name}</div>
                </div>`;
        }
    });

    grid.innerHTML = html;
}

// Başlat
renderWeeklyGrid();
window.addEventListener('resize', renderWeeklyGrid);
</script>
</body>
</html>
